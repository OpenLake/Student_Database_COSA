{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function () {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.req = exports.json = exports.toBuffer = void 0;\nconst http = __importStar(require(\"http\"));\nconst https = __importStar(require(\"https\"));\nasync function toBuffer(stream) {\n  let length = 0;\n  const chunks = [];\n  for await (const chunk of stream) {\n    length += chunk.length;\n    chunks.push(chunk);\n  }\n  return Buffer.concat(chunks, length);\n}\nexports.toBuffer = toBuffer;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function json(stream) {\n  const buf = await toBuffer(stream);\n  const str = buf.toString('utf8');\n  try {\n    return JSON.parse(str);\n  } catch (_err) {\n    const err = _err;\n    err.message += ` (input: ${str})`;\n    throw err;\n  }\n}\nexports.json = json;\nfunction req(url, opts = {}) {\n  const href = typeof url === 'string' ? url : url.href;\n  const req = (href.startsWith('https:') ? https : http).request(url, opts);\n  const promise = new Promise((resolve, reject) => {\n    req.once('response', resolve).once('error', reject).end();\n  });\n  req.then = promise.then.bind(promise);\n  return req;\n}\nexports.req = req;","map":{"version":3,"names":["http","__importStar","require","https","toBuffer","stream","length","chunks","chunk","push","Buffer","concat","exports","json","buf","str","toString","JSON","parse","_err","err","message","req","url","opts","href","startsWith","request","promise","Promise","resolve","reject","once","end","then","bind"],"sources":["../src/helpers.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAAA,IAAA,GAAAC,YAAA,CAAAC,OAAA;AACA,MAAAC,KAAA,GAAAF,YAAA,CAAAC,OAAA;AAOO,eAAeE,QAAQA,CAACC,MAAgB;EAC9C,IAAIC,MAAM,GAAG,CAAC;EACd,MAAMC,MAAM,GAAa,EAAE;EAC3B,WAAW,MAAMC,KAAK,IAAIH,MAAM,EAAE;IACjCC,MAAM,IAAIE,KAAK,CAACF,MAAM;IACtBC,MAAM,CAACE,IAAI,CAACD,KAAK,CAAC;;EAEnB,OAAOE,MAAM,CAACC,MAAM,CAACJ,MAAM,EAAED,MAAM,CAAC;AACrC;AARAM,OAAA,CAAAR,QAAA,GAAAA,QAAA;AAUA;AACO,eAAeS,IAAIA,CAACR,MAAgB;EAC1C,MAAMS,GAAG,GAAG,MAAMV,QAAQ,CAACC,MAAM,CAAC;EAClC,MAAMU,GAAG,GAAGD,GAAG,CAACE,QAAQ,CAAC,MAAM,CAAC;EAChC,IAAI;IACH,OAAOC,IAAI,CAACC,KAAK,CAACH,GAAG,CAAC;GACtB,CAAC,OAAOI,IAAa,EAAE;IACvB,MAAMC,GAAG,GAAGD,IAAa;IACzBC,GAAG,CAACC,OAAO,IAAI,YAAYN,GAAG,GAAG;IACjC,MAAMK,GAAG;;AAEX;AAVAR,OAAA,CAAAC,IAAA,GAAAA,IAAA;AAYA,SAAgBS,GAAGA,CAClBC,GAAiB,EACjBC,IAAA,GAA6B,EAAE;EAE/B,MAAMC,IAAI,GAAG,OAAOF,GAAG,KAAK,QAAQ,GAAGA,GAAG,GAAGA,GAAG,CAACE,IAAI;EACrD,MAAMH,GAAG,GAAG,CAACG,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC,GAAGvB,KAAK,GAAGH,IAAI,EAAE2B,OAAO,CAC7DJ,GAAG,EACHC,IAAI,CACe;EACpB,MAAMI,OAAO,GAAG,IAAIC,OAAO,CAAuB,CAACC,OAAO,EAAEC,MAAM,KAAI;IACrET,GAAG,CACDU,IAAI,CAAC,UAAU,EAAEF,OAAO,CAAC,CACzBE,IAAI,CAAC,OAAO,EAAED,MAAM,CAAC,CACrBE,GAAG,EAAqB;EAC3B,CAAC,CAAC;EACFX,GAAG,CAACY,IAAI,GAAGN,OAAO,CAACM,IAAI,CAACC,IAAI,CAACP,OAAO,CAAC;EACrC,OAAON,GAAG;AACX;AAjBAV,OAAA,CAAAU,GAAA,GAAAA,GAAA"},"metadata":{},"sourceType":"script","externalDependencies":[]}